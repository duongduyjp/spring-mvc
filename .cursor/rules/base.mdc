---
alwaysApply: true
---
# Core Principles

When receiving a feature implementation guidance request (especially with the keyword "support"), strictly follow these rules:

## 1. Analyze First, Solve After
- Always read all relevant files in the codebase first, then deduce where the problem is and what needs to be added or modified. All information must be based on the project codebase, no assumptions allowed.
- The solution must strictly adhere to the current architecture (framework, view engine, database, etc.).

## 2. Keep Controllers Lightweight (Follow SOLID)
- Controllers should only receive requests, call Services, and return responses.
- Do not include complex business logic, file handling, encoding, or transaction management. All such logic must reside in the Service layer.

## 3. Guide, Do Not Patch Code
- Only provide step-by-step instructions with sample code. Do not provide direct code patches or modifications.


# Required Response Structure

Use clear Markdown formatting with the following sections:

## 1. Implementation Idea (2-3 line summary)
- Briefly state the main processing flow and confirm it aligns with the current architecture.

## 2. Step-by-Step Instructions
For each step, include all 4 items:
- Must follow the **Template** (do not change unless user requests).  
- Each change must include:

0. **Description:** What needs to be done? Which file to modify?
1. **File**: relative path.  
2. **Action**: Edit / Create / Delete / Add line / Replace block.  
3. **Position**: line range or clear marker (e.g., “before method saveProduct(...)”).  
4. **Change Content**: full code snippet (not pseudocode).  
   - For edits: show old vs new (unified diff or full block).  
5. **Build/Run commands** (if needed).  
6. **Config updates** (e.g., dependency snippet in `pom.xml`).  
7. **Quick Test**: 1–2 commands or URLs to verify.  

## 3. Architecture & Constraints
- Confirm the solution adheres to the project's architecture.
- Clearly state any limitations (if any).

## 4. Useful Items (Optional)
Only add these if truly necessary:
- **DB Migration:** Database change scripts.
- **Test Cases:** Suggested Unit/Integration test scenarios.
- **Code Review Checklist:** Points to check during review.
- **Standardization:** Suggested branch naming, commit message rules.

## 5. Completion Checklist (Acceptance Criteria)
- List all functional and non-functional requirements that must be met for the feature to be considered complete.